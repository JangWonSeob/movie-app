<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="/fragments/head :: fragment-head"></div>
</head>

<style>
    body{
        margin: 0 auto;
        width: auto;
        background-color: black;
    }
    .container1{
        margin-right:15px;
        margin-left: 15px;
        margin-top: 50px;
        margin-bottom: 50px;
    }

    .youtube-wrap {
        position: relative;
        padding-bottom: 56.25%; /* 16:9 */
        padding-top: 25px;
        height: 0;
        margin-right: 3px;
    }
    .youtube-wrap iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 60%;
    }
    .swiper {
        width: 600px;
        height: 300px;
    }
    .none {
        display: none;
    }
    .flex {
        display: flex;
    }
</style>

<div th:replace="/fragments/commonNav :: commonNav"></div>

<main style="margin: 0 auto; width: 75%">
    <body>

    <div class="container1 rounded" style="background-color: white; padding: 50px" >
        <div class=" d-flex justify-content-between" >
            <div style="padding: 50px 70px 0px 70px">
                <h2 th:text="${movie.title}"></h2>
                <div>
                    <span th:text="|${movie.originalTitle},|"></span>
                    <span th:text="| ${#dates.format(movie.releaseDate, 'yyyy')}|"></span>
                </div>
                <button th:style="${movie.bookMarkYn ? 'background-color:yellow' : 'background-color:white'}" id="movie-bookmark">즐겨찾기</button>
                <hr style="border: none;height: 1px" class="mb-5">
                <div class="mb-3" style="margin-right: 6px;">
                    <span><b>장르</b> </span>
                    <span th:text="${movie.genreNames}"></span>
                </div>
                <div class="mb-3" style="margin-right: 6px;">
                    <span><b>평점</b> </span>
                    <span th:text="${movie.voteAverage}"></span>
                </div>
                <div class="mb-3" style="margin-right: 6px;">
                    <span><b>성인 여부</b> </span>
                    <span th:if="${movie.isAdult()}">해당</span>
                    <span th:unless="${movie.isAdult()}">해당없음</span>
                </div>
                <div class="mb-3" style="margin-right: 6px;">
                    <span><b>개봉일</b> </span>
                    <span th:text="| ${#dates.format(movie.releaseDate, 'yyyy-MM-dd')}|"></span>
                </div>
                <div class="mb-3" style="margin-right: 6px;">
                    <span><b>상영시간</b> </span>
                    <span th:text="| ${movie.runtime} 분|"></span>
                </div>
                <div class="mb-3" style="margin-right: 6px;">
                    <div><b>구매</b> </div>
                    <span th:each="logo : ${movie.watchProvidersBuyList}">
                        <img style="width: 50px; height: 50px;" th:src="${logo.fullLogPath}">
                    </span>
                </div>
                <div class="mb-3" style="margin-right: 6px;">
                    <div><b>대여</b> </div>
                    <span th:each="logo : ${movie.watchProvidersRentList}">
                        <img style="width: 50px; height: 50px;" th:src="${logo.fullLogPath}">
                    </span>
                </div>
            </div>
            <div>
                <img th:src="${movie.fullPosterPath}">
            </div>
        </div>
        <br>
        <hr style="border: solid 1px gray" class="mb-5">
        <h3 class="mb-3" style="padding: 50px 5px 0px 70px">줄거리</h3>
        <div class="mb-5" style="padding: 5px 70px 0px 70px">
            <div th:text="${movie.overview}"></div>
        </div>

        <hr style="border: solid 1px gray" class="mb-5">
        <h3 class="mb-3" style="padding: 50px 70px 0px 70px">동영상</h3>


        <div class="row">
            <div class="youtube-wrap col-md-6" th:each="youtube : ${movie.watchYoutubeList}" >
                <iframe width="100%" height="100%" th:src="${youtube.youtubeUrl}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>

        <hr/>
        <div style="margin: 40px 0px 20px 20px">
            <h3>댓글</h3>
            <input type="hidden" id="loginYn" th:value="${loginYn}">
            <hr/>
            <div id="comment_list"></div>
            <div th:if="${loginYn}" style="display: flex; justify-content: space-between" class="row">
                <div class="col-md-10">
                    <textarea style="height: 100%; width: 100%" class="rounded" id="comment_contents" placeholder="댓글을 입력해주세요."></textarea>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-primary" style="min-width: 50px; height: 100%;" id="comment_set">등록</button>
                </div>
            </div>
            <div th:if="${!loginYn}" style="display: flex; justify-content: space-between" class="row">
                <div class="col-md-10">
                    <textarea style="height: 100%; width: 100%" class="rounded" id="not_login_contents" readonly>로그인 후 이용해주세요.</textarea>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-primary" type="button" style="min-width: 50px; height: 100%;">등록</button>
                </div>

            </div>
            <br/>
        </div>

<!--        <div class="row mb-5" style="padding-left: 10px;">-->
<!--            <input id="comment_contents" class="col-md-11 rounded" style="padding-left : 15px; display: flex; justify-content: space-between" placeholder="댓글을 입력해주세요.">-->
<!--            <div class="col-md-1" style="text-align: left;">-->
<!--                <button id="comment_set" class="w-20 btn btn-lg btn-primary">등록</button>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div id="comment_list"></div>-->


<!--        <div class="pager">-->
<!--            <a @click="goPageIndex(mxPage.firstPageIndex)" :disabled="mxIsFirstPageIndex" href="javascript:;" class="btn_first"></a>-->
<!--            <a @click="goPageIndex(mxPage.prevPageIndex)" :disabled="mxIsPrevPageIndex" href="javascript:;" class="btn_prev"></a>-->
<!--            <a v-for="(x, index) in mxPageRange" :disabled="search.pageIndex == x" :key="index" v-text="x" @click="goPageIndex(x)" href="javascript:;" :class="{ 'on': mxPage.pageIndex == x}">1</a>-->
<!--            <a @click="goPageIndex(mxPage.nextPageIndex)" :disabled="mxIsNextPageIndex" href="javascript:;" class="btn_next"></a>-->
<!--            <a @click="goPageIndex(mxPage.finalPageIndex)" :disabled="mxIsFinalPageIndex" href="javascript:;" class="btn_last"></a>-->
<!--        </div>-->


        <nav id="pager" aria-label="Page navigation example">

        </nav>

    </div>
    </div>
    </body>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
<script th:src="@{/js/movie/detail.js(v=${#dates.createNow().getTime()})}"></script>
</html>